"use strict";(self["webpackChunkguiness_front"]=self["webpackChunkguiness_front"]||[]).push([[911],{8911:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"post-view"},[n("PostItem")],1)},o=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"post-card__wrapper"},[n("div",{staticClass:"post-card"},[n("div",{staticClass:"post-card__img"},[n("img",{staticStyle:{width:"100%"},attrs:{src:e.img,alt:""}})]),n("div",[n("div",{staticClass:"post-card__follow"},[n("div",[n("span",[e._v("작성자 ID: "+e._s(e.postData.writerID))]),this.$store.state.userID!=this.postData.writerID?n("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:e.followUser}},[e._v(" 팔로우 "),n("i",{class:["fa-heart",e.follow?"fas":"far"]})]):e._e(),this.$store.state.userID==this.postData.writerID?n("div",[n("span",{staticClass:"myPost"},[e._v(" [내가 쓴 글] ")])]):e._e()]),this.$store.state.userID==this.postData.writerID?n("div",{staticClass:"post-card__btns"},[n("button",{staticClass:"btn__edit",on:{click:e.editPost}},[e._v("수정")]),n("button",{staticClass:"btn__delete",on:{click:e.deletePost}},[e._v("삭제")])]):e._e()]),n("div",{staticClass:"post-card__contents"},[n("h3",{staticClass:"text__title"},[e._v(e._s(e.postData.postTitle))]),n("div",{staticClass:"text__contents"},[e._v(e._s(e.postData.content))]),e._l(e.comments,(function(t,r){return n("div",{key:t.index,staticClass:"text__comments"},[n("span",[e._v(" "+e._s(t.content))]),n("div",[n("span",[e._v("ID: "+e._s(t.userID))]),n("button",{staticClass:"btn_del-comment",on:{click:function(t){return e.deleteComment(r)}}},[e._v(" 삭제 ")])])])})),n("button",{staticClass:"btn-like",attrs:{type:"button",disabled:!this.likeAble},on:{click:e.likePost}},[e._v(" 좋아요 "+e._s(this.postData.likeNum)+"  "),n("i",{class:["fa-heart",0==this.likeAble?"fas":"far"]})]),n("button",{staticClass:"btn-report",attrs:{type:"button",disabled:!this.reportAble},on:{click:e.reportPost}},[e._v(" 신고하기 "+e._s(e.postData.reportCount)+"  ")])],2),n("div",{staticClass:"comment-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),n("button",{attrs:{disabled:!this.comment},on:{click:e.createComment}},[e._v(" 작성 ")])])])])])])},a=[],c=n(6198),i=(n(1539),n(2222),n(8975),n(9344)),u=n(866);function l(e){return u.eE.post("comm/comment",e)}function p(e){return u.eE.get("comm/comments/".concat(e))}function f(e){return u.eE["delete"]("comm/comment/".concat(e))}var m=n(8383),v=n(4900);function d(e,t){return u.eE.get("/report/check/".concat(e,"/").concat(t))}function h(e,t){return u.eE.post("/report/report/".concat(e,"/").concat(t))}var g=n(6166),w=n.n(g),k={created:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPost();case 2:return t.next=4,e.getImg();case 4:return t.next=6,e.fetchComments();case 6:return t.next=8,e.fetchFollowee();case 8:return t.next=10,e.checkFollow();case 10:return t.next=12,e.fetchIfUserLiked();case 12:return t.next=14,e.fetchReport();case 14:case"end":return t.stop()}}),t)})))()},mounted:function(){console.log("id:",this.$route.params.id)},data:function(){return{title:"제목",contents:"내용",comments:[],comment:"",commentNum:"",postData:[{likeNum:0,reportCount:0}],postId:this.$route.params.id,follow:!1,username:"닉네임",writerID:"",followeeList:[],likeValue:0,reportValue:0,likeAble:!0,reportAble:!0,img:""}},computed:{},methods:{checkFollow:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.writerID;case 3:n=t.sent,r=e.followeeList.some((function(e){return e.followeeID==n})),e.follow=r,console.log("내가 이미 글쓴이를 팔로우 중인지",r),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},fetchPost:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.SD)(e.postId);case 3:n=t.sent,r=n.data,console.log(r),e.postData=r,e.writerID=r.writerID,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},fetchIfUserLiked:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,v.hw)(e.postId,e.$store.state.userID);case 3:n=t.sent,r=n.data,console.log("좋아요 여부",r[0]["count(*)"]),0==r[0]["count(*)"]?e.likeAble=!0:e.likeAble=!1,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},likePost:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.likeAble=!1,e.postData.likeNum+=1,t.prev=2,1!=e.likeAble){t.next=11;break}return t.next=6,(0,v.j)(e.postId,e.$store.state.userID);case 6:n=t.sent,r=n.data,console.log("좋아요 누름",r),t.next=12;break;case 11:return t.abrupt("return",e.postId);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0);case 17:return t.prev=17,e.fetchPost(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})))()},fetchReport:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d(e.postId,e.$store.state.userID);case 3:n=t.sent,r=n.data,0==r[0]["count(*)"]?e.reportAble=!0:e.reportAble=!1,console.log("신고 값 반환",e.reportAble),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},reportPost:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.postData.reportCount+=1,e.reportAble=!1,t.prev=2,0!=e.reportValue){t.next=11;break}return t.next=6,h(e.postId,e.$store.state.userID);case 6:n=t.sent,r=n.data,console.log("신고 누름",r),t.next=12;break;case 11:return t.abrupt("return",e.postId);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](2),console.log(t.t0);case 17:return t.prev=17,e.fetchReport(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,14,17,20]])})))()},fetchFollowee:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,m.kQ)(e.$store.state.userID);case 3:n=t.sent,r=n.data,e.followeeList=r,console.log("나의 팔로위 목록 배열로 조회",e.followeeList),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},followUser:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,n=e.postData.writerID,r=e.$store.state.userID,0!=e.follow){t.next=13;break}return t.next=6,(0,m.PX)(r,n);case 6:o=t.sent,s=o.data,e.follow=!0,console.log("팔로우",s),alert("작성자를 팔로우하였습니다."),t.next=18;break;case 13:return t.next=15,(0,m.VR)(r,n);case 15:e.follow=!1,console.log("팔로우 취소"),alert("작성자를 언팔로우하였습니다.");case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](0),console.log(t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})))()},deletePost:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=confirm("정말 삭제하시겠습니까?"),1!=n){t.next=16;break}return t.prev=2,t.next=5,(0,i.fR)(e.postId);case 5:r=t.sent,o=r.data,console.log(o),e.$router.push("category"),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:t.next=17;break;case 16:console.log("삭제 취소");case 17:case"end":return t.stop()}}),t,null,[[2,11]])})))()},editPost:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.postId,e.$router.push({path:"/postview/edit/".concat(n),replace:!0});case 2:case"end":return t.stop()}}),t)})))()},createComment:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l({content:e.comment,userID:e.$store.state.userID,postNum:e.postId});case 3:n=t.sent,r=n.data,console.log(r),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:return t.prev=11,e.initForm(),e.fetchComments(),t.finish(11);case 15:case"end":return t.stop()}}),t,null,[[0,8,11,15]])})))()},fetchComments:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p(e.postId);case 2:n=t.sent,r=n.data,e.comments=r,console.log(r),console.log("댓글",e.comments);case 7:case"end":return t.stop()}}),t)})))()},initForm:function(){this.comment=""},deleteComment:function(e){var t=this;return(0,c.Z)(regeneratorRuntime.mark((function n(){var r,o,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.comments[e].userID!=t.$store.state.userID){n.next=20;break}if(r=confirm("정말 삭제하시겠습니까?"),1!=r){n.next=17;break}return n.prev=3,n.next=6,f(t.comments[e].commentNum);case 6:o=n.sent,s=o.data,console.log(s),t.fetchComments(),n.next=15;break;case 12:n.prev=12,n.t0=n["catch"](3),console.log(n.t0);case 15:n.next=18;break;case 17:console.log("삭제 취소");case 18:n.next=21;break;case 20:return n.abrupt("return",alert("본인이 작성한 댓글만 삭제할 수 있습니다"));case 21:case"end":return n.stop()}}),n,null,[[3,12]])})))()},getImg:function(){var e=this;return(0,c.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=parseInt(e.postId),w().get("".concat({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_API_URL,"post/image/").concat(n)).then((function(t){var n=t.data[0].file_src;e.img=n,console.log("이미지 조회",t.data[0].file_src)}));case 2:case"end":return t.stop()}}),t)})))()}}},x=k,b=n(1001),_=(0,b.Z)(x,s,a,!1,null,"cfdc75b0",null),I=_.exports,D={components:{PostItem:I}},R=D,C=(0,b.Z)(R,r,o,!1,null,null,null),E=C.exports},8383:function(e,t,n){n.d(t,{$e:function(){return a},PX:function(){return o},VR:function(){return s},kQ:function(){return c}});n(2222);var r=n(866);function o(e,t){return r.eE.post("foll/create/".concat(e,"/").concat(t))}function s(e,t){return r.eE["delete"]("foll/delete/".concat(e,"/").concat(t))}function a(e){return r.eE.get("foll/followers/".concat(e))}function c(e){return r.eE.get("foll/followees/".concat(e))}},4900:function(e,t,n){n.d(t,{hw:function(){return s},j:function(){return a},zn:function(){return o}});n(2222);var r=n(866);function o(e){return r.eE.get("like/likedPosts/".concat(e))}function s(e,t){return r.eE.get("like/liked/".concat(e,"/").concat(t))}function a(e,t){return r.eE.post("like/like/".concat(e,"/").concat(t))}},9344:function(e,t,n){n.d(t,{Bn:function(){return i},SD:function(){return o},dq:function(){return c},fR:function(){return a},qb:function(){return s}});var r=n(866);function o(e){return r.eE.get("post/posts/".concat(e))}function s(e){return r.eE.post("post/posts",e)}function a(e){return r.eE["delete"]("post/posts/".concat(e))}function c(e,t){return r.eE.put("post/posts/".concat(e),t)}function i(e){return r.eE.get("/post/postsByCat/".concat(e))}}}]);
//# sourceMappingURL=911-legacy.d5afd0c3.js.map