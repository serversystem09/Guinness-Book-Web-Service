"use strict";(self["webpackChunkguiness_front"]=self["webpackChunkguiness_front"]||[]).push([[783],{6783:function(t,s,o){o.r(s),o.d(s,{default:function(){return k}});var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"post-view"},[o("PostItem")],1)},n=[],c=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",[o("div",{staticClass:"post-card__wrapper"},[o("div",{staticClass:"post-card"},[o("div",{staticClass:"post-card__img"},[t._v("이미지 자리")]),o("div",[o("div",{staticClass:"post-card__follow"},[o("div",[o("span",[t._v(t._s(t.postData.writerID))]),o("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:t.followUser}},[t._v(" 팔로우 "),o("i",{class:["fa-heart",t.follow?"fas":"far"]})])]),this.$store.state.token?o("div",{staticClass:"post-card__btns"},[o("button",{staticClass:"btn__edit",on:{click:t.editPost}},[t._v("수정")]),o("button",{staticClass:"btn__delete",on:{click:t.deletePost}},[t._v("삭제")])]):t._e()]),o("div",{staticClass:"post-card__contents"},[o("h3",{staticClass:"text__title"},[t._v(t._s(t.postData.postTitle))]),o("div",{staticClass:"text__contents"},[t._v(t._s(t.postData.content))]),t._l(t.comments,(function(s,e){return o("div",{key:s.index,staticClass:"text__comments"},[o("span",[t._v(" "+t._s(s.content))]),o("span",[t._v(" "+t._s(s.userID))]),o("button",{staticClass:"btn_del-comment",on:{click:function(s){return t.deleteComment(e)}}},[t._v(" 삭제 ")])])})),o("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:t.likePost}},[t._v(" 좋아요 "+t._s(t.postData.likeNum)+" "),o("i",{class:["fa-heart",t.liked?"fas":"far"]})])],2),o("div",{staticClass:"comment-form"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],domProps:{value:t.comment},on:{input:function(s){s.target.composing||(t.comment=s.target.value)}}}),o("button",{attrs:{disabled:!this.comment},on:{click:t.createComment}},[t._v(" 작성 ")])])])])])])},i=[],a=o(9344),l=o(866);function r(t){return l.eE.post("comm/comment",t)}function m(t){return l.eE.get(`comm/comments/${t}`)}function u(t){return l.eE["delete"](`comm/comment/${t}`)}var d={created(){this.fetchPost(),this.fetchComments()},mounted(){console.log("id:",this.$route.params.id)},data(){return{title:"제목",contents:"내용",comments:[],comment:"",commentNum:"",postData:[],postId:this.$route.params.id,liked:!1,follow:!1,username:"닉네임"}},methods:{async fetchPost(){try{const{data:t}=await(0,a.SD)(this.postId);console.log(t),this.postData=t}catch(t){console.log(t)}},async likePost(){console.log("좋아요"),this.liked=!this.liked,0==this.liked?(this.postData.likeNum-=1,console.log("좋아요")):(this.postData.likeNum+=1,console.log("좋아요 취소"))},async followUser(){console.log("팔로우"),this.follow=!this.follow},async deletePost(){const t=confirm("정말 삭제하시겠습니까?");if(1==t){try{const{data:t}=await(0,a.fR)(this.postId);console.log(t)}catch(s){console.log(s)}this.$router.push("/category")}else console.log("삭제 취소")},async editPost(){const t=this.postId;this.$router.push({path:`/postview/edit/${t}`,replace:!0})},async createComment(){try{const{data:t}=await r({content:this.comment,userID:this.$store.state.userID,postNum:this.postId});console.log(t)}catch(t){console.log(t)}finally{this.initForm(),this.fetchComments()}},async fetchComments(){const{data:t}=await m(this.postId);this.comments=t,console.log(t),console.log("댓글",this.comments)},initForm(){this.comment=""},async deleteComment(t){const s=confirm("정말 삭제하시겠습니까?");if(1==s)try{const{data:s}=await u(this.comments[t].commentNum);console.log(s),this.fetchComments()}catch(o){console.log(o)}else console.log("삭제 취소")}}},p=d,f=o(3736),h=(0,f.Z)(p,c,i,!1,null,"55d0b984",null),_=h.exports,v={components:{PostItem:_}},g=v,C=(0,f.Z)(g,e,n,!1,null,null,null),k=C.exports},9344:function(t,s,o){o.d(s,{SD:function(){return n},dq:function(){return a},fR:function(){return i},qb:function(){return c}});var e=o(866);function n(t){return e.eE.get(`post/posts/${t}`)}function c(t){return e.eE.post("post/posts",t)}function i(t){return e.eE["delete"](`post/posts/${t}`)}function a(t,s){return e.eE.put(`post/posts/${t}`,s)}}}]);
//# sourceMappingURL=783.a3c882b4.js.map